{
    "version": 3,
    "sources": [
        "..\\..\\src\\controller\\wxopenid.js"
    ],
    "names": [
        "Base",
        "require",
        "moment",
        "request",
        "http",
        "module",
        "exports",
        "getAction",
        "data",
        "request_url",
        "error",
        "response",
        "body",
        "statusCode",
        "json",
        "isPost",
        "PostData",
        "post",
        "code",
        "test_url",
        "flag",
        "msg",
        "model",
        "select",
        "success",
        "z",
        "indexAction",
        "addAction",
        "time",
        "Date",
        "format",
        "think",
        "isEmpty",
        "id",
        "res",
        "add",
        "catch",
        "isError",
        "err",
        "Error",
        "e",
        "fail",
        "message",
        "update"
    ],
    "mappings": "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",
    "file": "..\\..\\src\\controller\\wxopenid.js",
    "sourcesContent": [
        "const Base = require('./base.js');\nconst moment = require('moment');//引用了moment库,需要安装npm install --save moment\nvar request = require('request');  //请求api使用\nconst http = require('https');\n\nmodule.exports = class extends Base {\n  async getAction() {\n    let data = {};\n    \n    let request_url = 'https://api.weixin.qq.com/sns/jscode2session?appid='\n      +'wx50947b9055f9da00'+'&secret='+'ab05a5f8222feca8bc4da6153ac673d4'\n      +'&js_code=023CtwRZ17JbrW0J0kQZ1E1DRZ1CtwRK&grant_type=authorization_code';\n      request('http://127.0.0.1:8360/wxopenid/get', function (error, response, body) {\n        //return this.json(response);\n        if (!error && response.statusCode == 200) {\n          return this.json(\"b\");\n        }else{\n          return this.json(\"a\");\n        }\n      });\n     //return this.json(response);\n\n    if(this.isPost){\n      \n      let PostData = this.post();\n       \n      let request_url = 'https://api.weixin.qq.com/sns/jscode2session?appid='\n      +'wx50947b9055f9da00'+'&secret='+'ab05a5f8222feca8bc4da6153ac673d4'\n      +'&js_code='+PostData.code+'&grant_type=authorization_code';\n      request(request_url, function (error, response, body) {\n        return this.json(response);\n        if (!error && response.statusCode == 200) {\n        }\n      });\n      \n\n      /*\n      http.get(request_url,function(data){\n        var str=\"\";\n        data.on(\"data\",function(chunk){\n            str+=chunk;//监听数据响应，拼接数据片段\n        })\n        data.on(\"end\",function(){\n           // console.log(str.toString())\n            return this.json(str);\n        })\n    })\n    */\n\n\n      //return PostData;\n      let error,response,body;\n      let test_url = 'http://www.baidu.com';\nrequest(test_url, function (error, response, body) {\n  return this.json(response);\n  if (!error && response.statusCode == 200) {\n    //return body;\n    //console.log(body) // 请求成功的处理逻辑\n\n   // return this.json(body);\n\n  }\n  // GET https://api.weixin.qq.com/sns/jscode2session?appid=APPID&secret=SECRET&js_code=JSCODE&grant_type=authorization_code\n\n\n\n\n});\n\n\n    }else{\n\n      data.flag = '0';\n      data.msg = '出现未知错误，请退出重试1';\n    }\n    return this.json(data);\n\n    \n\n\n\n    return this.json(\"123\");\n     \n      if (this.isPost) {\n      let data = await this.model('thinkjsplus_logger').select();\n      //return '1';\n      return this.success(data);\n    } else {\n      return this.json(null);\n    }\n    \n  }\nz\n  async indexAction() {\n    return this.json(\"123\");\n     \n      if (this.isPost) {\n      let data = await this.model('thinkjsplus_logger').select();\n      //return '1';\n      return this.success(data);\n    } else {\n      return this.json(null);\n    }\n    \n  }\n\n  async addAction() {\n    let data = this.post();\n    return this.json(data);\n    data.time = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\n    if (think.isEmpty(data.id)) {\n     \n      let res=null;\n      try {\n         //保存\n        res = await this.model('thinkjsplus_logger').add(data).catch(err => {\n          return think.isError(err) ? err : new Error(err);\n        });\n      } catch (e) {\n        return this.fail(1000, e);\n      }\n\n      if (think.isError(res)) {\n        return this.fail(1000, res.message);\n      }\n      if (res) {\n        this.success(true);\n      } else {\n        this.success(true);\n      }\n    } else {\n      //更新\n      let res = await this.model('thinkjsplus_logger').update(data);\n      if (res) {\n        this.success(true);\n      } else {\n        this.success(true);\n      }\n    }\n  }\n};"
    ]
}